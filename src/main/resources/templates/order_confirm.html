<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/order_confirm.css}">

  <title>らくらくアロハ</title>
</head>

<body>
  <header class="fixed-top">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-info">
      <!-- Container wrapper -->
      <div class="container-fluid">
        <!-- Toggle button -->
        <button class="navbar-toggler" type="button" data-mdb-toggle="collapse"
          data-mdb-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
          <i class="fas fa-bars"></i>

        </button>
        <!-- Navbar brand -->
        <a class="navbar-brand mt-2 mt-lg-0" href="item_list.html">
          <img th:src="@{/img_aloha/header_logo.png}" class="bg-light" height="15" alt="Rakuraku aloha Logo"
            loading="lazy" />
        </a>

        <!-- Collapsible wrapper -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

          <!-- Left links -->
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="item_list.html">ホーム</a>
            </li>
            <li class="nav-item">
              <!-- Search Form-->
              <form class="d-flex input-group w-auto">
                <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                  aria-describedby="search-addon" />
                <span class="input-group-text border-0" id="search-addon">
                  <i class="fas fa-search"></i>
                </span>
              </form>
            </li>
          </ul>
          <!-- Left links -->
        </div>
        <!-- Collapsible wrapper -->

        <!-- Right elements -->
        <div class="d-flex align-items-center">

          <!-- Icon -->
          <a class="text-reset me-3 dropdown-toggle hidden-arrow" href="cart_list.html" id="navbarDropdownMenuLink" role="button"
            data-mdb-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-shopping-cart"></i>
            <span class="badge rounded-pill badge-notification bg-danger">1</span>
          </a>

          <!-- Avatar -->
          <div class="dropdown">
            <a class="dropdown-toggle d-flex align-items-center hidden-arrow" href="#" id="navbarDropdownMenuAvatar"
              role="button" data-mdb-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-circle-user"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuAvatar">
              <li>
                <a class="dropdown-item" href="#">マイページ</a>
              </li>
              <li>
                <a class="dropdown-item" href="#">注文履歴</a>
              </li>
              <li th:if="${session.user}">
                <a class="dropdown-item" th:href="@{/user/logout}"
                  >ログアウト</a
                >
              </li>
              <li th:unless="${session.user}">
                <a class="dropdown-item" th:href="@{/user/login}">ログイン</a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Right elements -->
      </div>
      <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
  </header>

  <main>
    <section>
      <div class="container">
        <br>
        <div class="progress">
          <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0"
            aria-valuemax="100"></div>
        </div>
      </div>
    </section>
    <br>
    <section>
      <div class="container">
        <br>
        <h2>注文内容確認</h2>
        <br><br>
        <p>ご注文内容を確認の上、必要事項を記入してください</p>
        <br>
        <h3 th:text="${'消費税：' + #numbers.formatInteger(tax, 1, 'COMMA')} + 円"></h3>
        <h2 th:text="${'合計金額(税込)：' + #numbers.formatInteger(totalPrice, 1, 'COMMA')} + 円"></h2>
        <br>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
              role="tab" aria-controls="home" aria-selected="true">
              注文内容確認
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button"
              role="tab" aria-controls="profile" aria-selected="false">
              お届け先情報
            </button>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
            <br>
            <h4>注文内容</h4>
			<div class="row flex-row flex-nowrap overflow-auto" th:if="${order}">
                    <!-- 1個のitem start -->
                    <div class="col mx-auto" style="width: 18rem;" th:each="orderItem : ${order.orderItemList}">
                        <div class="card text-center" style="width: 18rem;">
                            <img th:src="@{/img_aloha/} + ${orderItem.item.imagePath}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title" th:text="${orderItem.item.name}">Hawaiianパラダイス</h5>
                                <p class="card-text">
                                    <ul>
                                        <li>サイズ：<span th:text="${orderItem.size}">M</span></li>
                                        <li>数量：<span th:text="${orderItem.quantity}">1</span>個</li>
                                        <li>トッピング：
                                            <ul>
                                                <li th:each="orderTopping : ${orderItem.orderToppingList}" th:text="${orderTopping.topping.name}">エビ</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </p>
                                <p class="card-text"><strong>小計：<span th:text="${orderItem.getSubTotal()}">3280</span>円</strong></p>
                                <form th:action="@{/cart/delete}" method="post">
                                    <input type="hidden" name="orderItemId" th:value="${orderItem.id}">
                                    <button href="cart_list.html" class="btn btn-danger">削除</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- item end -->
                </div>
            <br>
            <div class="d-flec justify-content-center">
              <input type="checkbox">注文内容を確認しました。
            </div>

          </div>
          <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <br>
            <h3>お届け先情報</h3>
            <form th:action="@{/order/update}" method="post" th:object="${orderForm}">
                     <div class="register-input-content">
                         <div class="mb-3">
                             <label
                                 for="destinationName"
                                 class="form-label"
                                 >名前：</label
                             >
                             <div th:errors="*{destinationName}" style="color:red">エラー！</div>
                             <input
                                 type="text"
                                 name="destinationName"
                                 class="form-control"
                                 id="destinationName"
                                 th:field="*{destinationName}"
                             />
                         </div>

                         <hr>

                         <div class="mb-3">
                             <label
                                 for="destinationEmail"
                                 class="form-label"
                                 >メールアドレス：</label
                             >
                             <div th:errors="*{destinationEmail}" style="color:red">エラー！</div>
                             <input
                                 type="email"
                                 name="destinationEmail"
                                 class="form-control"
                                 id="destinationEmail"
                                 aria-describedby="emailHelp"
                                 th:field="*{destinationEmail}"
                             />
                             <div id="emailHelp" class="form-text">
                                 ex) taro@sample.com
                             </div>
                         </div>
                         
                         <hr>

                         <div class="mb-3">
                             <label
                                 for="zipcode"
                                 class="form-label"
                                 >郵便番号：</label
                             >
                             <div th:errors="*{destinationZipCode}" style="color:red">エラー！</div>
                             <input
                                 type="text"
                                 name="destinationZipCode"
                                 class="form-control"
                                 id="zipcode"
                                 th:field="*{destinationZipCode}"
                             />
                         </div>

                         <hr>

                         <div class="mb-3">
                             <label
                                 for="address"
                                 class="form-label"
                                 >住所：</label
                             >
                             <div th:errors="*{destinationAddress}" style="color:red">エラー！</div>
                             <input
                                 type="text"
                                 name="destinationAddress"
                                 class="form-control"
                                 id="address"
                                 th:field="*{destinationAddress}"
                             />
                         </div>

                         <hr>

                         <div class="mb-3">
                             <label
                                 for="destinationTel"
                                 class="form-label"
                                 >電話番号：</label
                             >
                             <div th:errors="*{destinationTel}" style="color:red">エラー！</div>
                             <input
                                 type="text"
                                 name="destinationTel"
                                 class="form-control"
                                 id="destinationTel"
                                 th:field="*{destinationTel}"
                             />
                         </div>
                         
                         <hr>
                         
                         <div class="mb-3">
                             <label
                                 for="deliveryTime"
                                 class="form-label"
                                 >配達日時：</label
                             >
                             <div th:errors="*{deliveryTime}" style="color:red">エラー！</div>
                             <input
                                 type="datetime-local"
                                 step="300"
                                 name="deliveryTime"
                                 class="form-control"
                                 id="deliveryTime"
                                 th:field="*{deliveryTime}"
                             />
                         </div>
                         
                         <hr>
                         
                         <div class="mb-3">
                          <div th:errors="*{paymentMethod}" style="color:red">エラー！</div>
                             <label
                                 for="deliveryTime"
                                 class="form-label"
                                 >支払い方法：</label
                             >
                             <div class="form-check">
                              <input class="form-check-input" type="radio" name="paymentMethod" id="flexRadioDefault1" value="1"/>
                              <label class="form-check-label" for="flexRadioDefault1"> 代金引換 </label>
                            </div>
                            
                            <div class="form-check">
                              <input class="form-check-input" type="radio" name="paymentMethod" id="flexRadioDefault2" value="2"/>
                              <label class="form-check-label" for="flexRadioDefault2"> クレジットカード決済 </label>
                            </div>
                          </div>
                          </div>
                          <hr>
                          <div id="car-input">

                          <h3>クレジットカード情報</h3>
                          <div class="mb-3">
                            <label
                                for="cardNumber"
                                class="form-label"
                                >クレジットカード番号：</label
                            >
                            <div th:errors="*{cardNumber}" style="color:red">エラー！</div>
                            <input
                                type="text"
                                name="cardNumber"
                                class="form-control"
                                id="cardNumber"
                                th:field="*{cardNumber}"
                            />
                        </div>
                        
                        <hr>
                          <div class="mb-3">
                            <label
                                for="cardExpMonth"
                                class="form-label"
                                >カード有効期限(月)：</label
                            >
                            <div th:errors="*{cardExpMonth}" style="color:red">エラー！</div>
                            <input
                                type="text"
                                name="cardExpMonth"
                                class="form-control"
                                id="cardExpMonth"
                                th:field="*{cardExpMonth}"
                            />
                        </div>
                        
                        <hr>
                          <div class="mb-3">
                            <label
                                for="cardExpYear"
                                class="form-label"
                                >カード有効期限(年)：</label
                            >
                            <div th:errors="*{cardExpYear}" style="color:red">エラー！</div>
                            <input
                                type="text"
                                name="cardExpYear"
                                class="form-control"
                                id="cardExpYear"
                                th:field="*{cardExpYear}"
                            />
                        </div>
                        
                        <hr>
                          <div class="mb-3">
                            <label
                                for="cardCvv"
                                class="form-label"
                                >セキュリティーコード：</label
                            >
                            <div th:errors="*{cardCvv}" style="color:red">エラー！</div>
                            <input
                                type="text"
                                name="cardCvv"
                                class="form-control"
                                id="cardCvv"
                                th:field="*{cardCvv}"
                            />
                        </div>
                        
                        <hr>
                          <div class="mb-3">
                            <label
                                for="cardName"
                                class="form-label"
                                >カード名義：</label
                            >
                            <div th:errors="*{cardName}" style="color:red">エラー！</div>
                            <input
                                type="text"
                                name="cardName"
                                class="form-control"
                                id="cardName"
                                th:field="*{cardName}"
                            />
                        </div>
                        
                        <hr>
                      </div>

                     <div class="button-link">
                         <a class="btn btn-outline-secondary" th:href="@{/order/confirm}">
                         	ショッピングカート画面へ
                         </a>
                         <button type="reset" class="btn btn-outline-info">
                         	入力画面のクリア
                         </button>
                         <button type="submit" class="btn btn-primary">
                             注文する
                         </button>
                     </div>
                 </form>
          </div>
        </div>


      </div>
    </section>
    <br>
    <section>
      <div class="container">

      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="text-center text-lg-start bg-light text-muted">

    <!-- Section: Links  -->
    <section class="">
      <div class="container text-center text-md-start mt-5">
        <br>
        <!-- Grid row -->
        <div class="row mt-3">

          <!-- Grid column -->
          <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
            <!-- Content -->
            <h6 class="text-uppercase fw-bold mb-4">
              <i class="fas fa-gem me-3"></i>らくらくアロハ
            </h6>
            <p>
              真心を込めて美味しい商品をお届けします
            </p>
          </div>
          <!-- Grid column -->

          <!-- Grid column -->
          <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
            <!-- Links -->
            <h6 class="text-uppercase fw-bold mb-4">
              Contact
            </h6>
            <p><i class="fas fa-home me-3"></i> 東京都渋谷区千駄ヶ谷</p>
            <p>
              <i class="fas fa-envelope me-3"></i>
              rakuraku-aloha@gmail.com
            </p>
            <p><i class="fas fa-phone me-3"></i> 0120-000-111</p>
          </div>
          <!-- Grid column -->
        </div>
        <!-- Grid row -->
      </div>
    </section>
    <!-- Section: Links  -->

    <!-- Copyright -->
    <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
      © 2021 Copyright:
      <a class="text-reset fw-bold" href="#">らくらくアロハ</a>
    </div>
    <!-- Copyright -->
  </footer>
  <!-- Footer -->

  <!-- MDB -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.2.0/mdb.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script type="text/javascript" th:src="@{/js/get_address.js}"></script>

</body>

</html>